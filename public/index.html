
    <!DOCTYPE html>
    <html lang="en">

    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>jcleigh's blog</title>
      <link rel="stylesheet" href="/98.css">
      <link rel="stylesheet" href="styles.css">
      <link rel="stylesheet" href="wp8-mobile.css">
    </head>

    <body>
      <div id="info" class="window main-window">
        <div id="title-bar" class="title-bar">
          <div class="title-bar-text"><img src="help_book_big-1.png" height="12px"/> Information</div>
          <div class="title-bar-controls">
            <button aria-label="Minimize"></button>
            <button aria-label="Maximize" disabled></button>
            <button aria-label="Close" disabled></button>
          </div>
        </div>
        <div class="window-body info-window-body">
          <img src="jordan.png" alt="Jordan Cleigh portrait" class="portrait-image">
          <div class="info-text">
            <p>Name: Jordan Cleigh</p>
            <p>Occupation: Staff Software Engineer @ <a href="https://fmgsuite.com" target="_blank">FMG</a></p>
            <p>Topics: Technology, Software Engineering, Music Production</p>
          </div>
        </div>
        <div class="status-bar">
          <p class="status-bar-field"><a href="https://linkedin.com/in/jcleigh" target="_blank">LinkedIn</a></p>
          <p class="status-bar-field"><a href="https://github.com/jcleigh" target="_blank">GitHub</a></p>
          <p class="status-bar-field">Attributions</p> <!-- TODO: make a popup for icon and css attributions -->
        </div>
      </div>

      <div id="posts" class="window main-window">
        <div id="title-bar" class="title-bar">
          <div class="title-bar-text"><img src="directory_open_cabinet-0.png" height="12px"/> Posts</div>
          <div class="title-bar-controls">
            <button aria-label="Minimize"></button>
            <button aria-label="Maximize" disabled></button>
            <button aria-label="Close" disabled></button>
          </div>
        </div>
        <div class="window-body">
          <marquee>This blog is currently under construction. Please check back later for real content.</marquee>
          <p class="post-header">Recent Posts:</p>
          <ul>
            <li><a href="#" class="post-link" data-title="A Brief History of My Computing Journey" data-content="%3Cp%3E%3Cem%3EThis%20is%20a%20placeholder%20post%20demonstrating%20the%20migration%20structure.%20The%20actual%20content%20from%20the%20Substack%20blog%20post%20will%20be%20inserted%20here%20once%20provided.%3C%2Fem%3E%3C%2Fp%3E%0A%3Ch2%3EEarly%20Days%3C%2Fh2%3E%0A%3Cp%3EMy%20journey%20with%20computing%20started%20early...%3C%2Fp%3E%0A%3Ch2%3EFirst%20Programming%20Experience%3C%2Fh2%3E%0A%3Cp%3EI%20remember%20my%20first%20time%20writing%20code...%3C%2Fp%3E%0A%3Ch2%3EProfessional%20Development%3C%2Fh2%3E%0A%3Cp%3EAs%20I%20grew%20in%20my%20career%2C%20I%20discovered...%3C%2Fp%3E%0A%3Ch2%3ECurrent%20Focus%3C%2Fh2%3E%0A%3Cp%3EToday%2C%20I%20work%20as%20a%20Staff%20Software%20Engineer%20at%20FMG%2C%20where%20I%20focus%20on...%3C%2Fp%3E%0A%3Chr%3E%0A%3Cp%3E%3Cstrong%3ENote%3A%3C%2Fstrong%3E%20This%20is%20a%20sample%20post%20to%20demonstrate%20the%20migration%20format.%20Please%20replace%20this%20content%20with%20the%20actual%20text%20from%20the%20Substack%20blog%20post%20%26quot%3BA%20Brief%20History%20of%20My%20Computing%20Journey%26quot%3B%20from%20%3Ca%20href%3D%22https%3A%2F%2Fjcleigh.substack.com%2Fp%2Fa-brief-history-of-my-computing-journey%22%3Ehttps%3A%2F%2Fjcleigh.substack.com%2Fp%2Fa-brief-history-of-my-computing-journey%3C%2Fa%3E%3C%2Fp%3E%0A">A Brief History of My Computing Journey</a> - 2024-08-11 00:02:00 +0000</li>
            <li><a href="#" class="post-link" data-title="Test" data-content="%3Cp%3EThis%20is%20a%20test%20post!%3C%2Fp%3E%0A%3Cp%3EHope%20you%26%2339%3Bre%20having%20a%20wonderful%20day!%3C%2Fp%3E%0A">Test</a> - 2024-11-02 12:54:53 +0000</li>
            <li><a href="#" class="post-link" data-title="Jordan test" data-content="%3Cp%3EI%20am%20testing%20this%20because%20it%20doesn%26%2339%3Bt%20make%20sense%20to%20me%3C%2Fp%3E%0A">Jordan test</a> - 2024-11-03 02:54:53 +0000</li>
            <li><a href="#" class="post-link" data-title="Welcome to Jekyll!" data-content="%3Cp%3EYou%E2%80%99ll%20find%20this%20post%20in%20your%20%3Ccode%3E_posts%3C%2Fcode%3E%20directory.%20Go%20ahead%20and%20edit%20it%20and%20re-build%20the%20site%20to%20see%20your%20changes.%20You%20can%20rebuild%20the%20site%20in%20many%20different%20ways%2C%20but%20the%20most%20common%20way%20is%20to%20run%20%3Ccode%3Ejekyll%20serve%3C%2Fcode%3E%2C%20which%20launches%20a%20web%20server%20and%20auto-regenerates%20your%20site%20when%20a%20file%20is%20updated.%3C%2Fp%3E%0A%3Cp%3ETo%20add%20new%20posts%2C%20simply%20add%20a%20file%20in%20the%20%3Ccode%3E_posts%3C%2Fcode%3E%20directory%20that%20follows%20the%20convention%20%3Ccode%3EYYYY-MM-DD-name-of-post.ext%3C%2Fcode%3E%20and%20includes%20the%20necessary%20front%20matter.%20Take%20a%20look%20at%20the%20source%20for%20this%20post%20to%20get%20an%20idea%20about%20how%20it%20works.%3C%2Fp%3E%0A%3Cp%3EJekyll%20also%20offers%20powerful%20support%20for%20code%20snippets%3A%3C%2Fp%3E%0A%3Cp%3E%7B%25%20highlight%20ruby%20%25%7D%0Adef%20print_hi(name)%0A%20%20puts%20%26quot%3BHi%2C%20%23%7Bname%7D%26quot%3B%0Aend%0Aprint_hi(%26%2339%3BTom%26%2339%3B)%0A%23%3D%26gt%3B%20prints%20%26%2339%3BHi%2C%20Tom%26%2339%3B%20to%20STDOUT.%0A%7B%25%20endhighlight%20%25%7D%3C%2Fp%3E%0A%3Cp%3ECheck%20out%20the%20%3Ca%20href%3D%22https%3A%2F%2Fjekyllrb.com%2Fdocs%2Fhome%22%3EJekyll%20docs%3C%2Fa%3E%20for%20more%20info%20on%20how%20to%20get%20the%20most%20out%20of%20Jekyll.%20File%20all%20bugs%2Ffeature%20requests%20at%20%3Ca%20href%3D%22https%3A%2F%2Fgithub.com%2Fjekyll%2Fjekyll%22%3EJekyll%E2%80%99s%20GitHub%20repo%3C%2Fa%3E.%20If%20you%20have%20questions%2C%20you%20can%20ask%20them%20on%20%3Ca%20href%3D%22https%3A%2F%2Ftalk.jekyllrb.com%2F%22%3EJekyll%20Talk%3C%2Fa%3E.%3C%2Fp%3E%0A">Welcome to Jekyll!</a> - 2024-11-04 02:54:53 +0000</li>
          </ul>
        </div>
      </div>

      <div id="post-content" class="window main-window">
        <div class="title-bar">
          <div class="title-bar-text"><img src="notepad-0.png" height="12px"/> <span id="post-title">About</span></div>
          <div class="title-bar-controls">
            <button aria-label="Minimize"></button>
            <button aria-label="Maximize"></button>
            <button aria-label="Close" onclick="document.getElementById('post-content').style.display='none'"></button>
          </div>
        </div>
        <div class="window-body" id="post-body">
          <p>Welcome to my blog! Here you will find posts about technology, software engineering, and music production. Stay tuned for more updates!</p>
        </div>
      </div>

      <!-- Start Menu -->
      <div id="start-menu" style="display: none;">
        <div class="start-menu-header">
          <span class="start-menu-title">jcleigh.dev</span>
        </div>
        <div class="start-menu-items">
          <div class="start-menu-item" onclick="openCalculator()">
            <span class="start-menu-icon">üßÆ</span>
            <span class="start-menu-text">Calculator</span>
          </div>
          <div class="start-menu-item" onclick="openNotepad()">
            <span class="start-menu-icon">üìù</span>
            <span class="start-menu-text">Notepad</span>
          </div>
          <div class="start-menu-separator"></div>
          <div class="start-menu-item" onclick="toggleTheme()">
            <span class="start-menu-icon">üì±</span>
            <span class="start-menu-text">Windows Phone 8 Mode</span>
          </div>
          <div class="start-menu-separator"></div>
          <div class="start-menu-item" onclick="window.location.reload()">
            <span class="start-menu-icon">üîÑ</span>
            <span class="start-menu-text">Refresh</span>
          </div>
        </div>
      </div>

      <!-- Windows 98 Taskbar -->
      <div id="taskbar">
        <button id="start-button">
          <span style="font-size: 12px;">ü™ü</span>
          Start
        </button>
        <div id="taskbar-buttons">
          <!-- Minimized windows will appear here -->
        </div>
        <div id="system-tray">
          <span id="clock"></span>
        </div>
      </div>

      <!-- Windows Phone 8 Mobile Experience -->
      <div class="wp8-mobile-container">
        <!-- Status Bar -->
        <div class="wp8-status-bar">
          <span class="wp8-carrier">jcleigh.dev</span>
          <span class="wp8-time" id="wp8-clock"></span>
        </div>

        <!-- Header -->
        <div class="wp8-header">
          <h1 class="wp8-title">jordan</h1>
          <p class="wp8-subtitle">staff software engineer</p>
        </div>

        <!-- Tiles Container -->
        <div class="wp8-tiles-container">
          <!-- Profile and Info Tiles -->
          <div class="wp8-tiles">
            <div class="wp8-tile wp8-tile-wide wp8-profile-tile">
              <img src="jordan.png" alt="Jordan Cleigh" class="wp8-profile-image">
              <div class="wp8-tile-content">
                <h3 class="wp8-tile-title">Jordan Cleigh</h3>
                <p class="wp8-tile-subtitle">Technology, Software Engineering, Music</p>
              </div>
            </div>

            <a href="https://fmgsuite.com" target="_blank" class="wp8-tile wp8-tile-small wp8-tile-blue">
              <div class="wp8-tile-icon">üè¢</div>
              <div class="wp8-tile-content">
                <h3 class="wp8-tile-title">FMG</h3>
                <p class="wp8-tile-subtitle">Work</p>
              </div>
            </a>

            <a href="https://linkedin.com/in/jcleigh" target="_blank" class="wp8-tile wp8-tile-small wp8-tile-teal">
              <div class="wp8-tile-icon">üíº</div>
              <div class="wp8-tile-content">
                <h3 class="wp8-tile-title">LinkedIn</h3>
              </div>
            </a>

            <a href="https://github.com/jcleigh" target="_blank" class="wp8-tile wp8-tile-small wp8-tile-purple">
              <div class="wp8-tile-icon">üíª</div>
              <div class="wp8-tile-content">
                <h3 class="wp8-tile-title">GitHub</h3>
              </div>
            </a>

            <div class="wp8-tile wp8-tile-small wp8-tile-green">
              <div class="wp8-tile-content">
                <p class="wp8-tile-count">4</p>
                <h3 class="wp8-tile-title">Posts</h3>
              </div>
            </div>

            <!-- Theme Toggle Tile -->
            <button class="wp8-tile wp8-tile-small wp8-tile-orange" onclick="toggleTheme()">
              <div class="wp8-tile-icon">ü™ü</div>
              <div class="wp8-tile-content">
                <h3 class="wp8-tile-title">Windows 98</h3>
                <p class="wp8-tile-subtitle">Switch theme</p>
              </div>
            </button>
          </div>

          <!-- Posts Section -->
          <div class="wp8-header" style="padding: 10px 0;">
            <h2 class="wp8-title" style="font-size: 32px;">recent posts</h2>
          </div>

          <div class="wp8-tiles">
            <button class="wp8-tile wp8-tile-wide wp8-post-tile wp8-post-button" data-title="A Brief History of My Computing Journey" data-content="This is a placeholder post demonstrating the migration structure. The actual content from the Substack blog post will be inserted here once provided.
Early Days
My journey with computing started early...
First Programming Experience
I remember my first time writing code...
Professional Development
As I grew in my career, I discovered...
Current Focus
Today, I work as a Staff Software Engineer at FMG, where I focus on...

Note: This is a sample post to demonstrate the migration format. Please replace this content with the actual text from the Substack blog post &quot;A Brief History of My Computing Journey&quot; from https://jcleigh.substack.com/p/a-brief-history-of-my-computing-journey
">
              <div class="wp8-post-date">Aug 11</div>
              <div class="wp8-tile-content">
                <h3 class="wp8-tile-title">A Brief History of My Computing Journey</h3>
                <p class="wp8-tile-subtitle">This is a placeholder post demonstrating the migra...</p>
              </div>
            </button>
            <button class="wp8-tile wp8-tile-wide wp8-post-tile wp8-post-button" data-title="Test" data-content="This is a test post!
Hope you&#39;re having a wonderful day!
">
              <div class="wp8-post-date">Nov 2</div>
              <div class="wp8-tile-content">
                <h3 class="wp8-tile-title">Test</h3>
                <p class="wp8-tile-subtitle">This is a test post!
Hope you&#39;re having a wond...</p>
              </div>
            </button>
            <button class="wp8-tile wp8-tile-wide wp8-post-tile wp8-post-button" data-title="Jordan test" data-content="I am testing this because it doesn&#39;t make sense to me
">
              <div class="wp8-post-date">Nov 3</div>
              <div class="wp8-tile-content">
                <h3 class="wp8-tile-title">Jordan test</h3>
                <p class="wp8-tile-subtitle">I am testing this because it doesn&#39;t make sens...</p>
              </div>
            </button>
            <button class="wp8-tile wp8-tile-wide wp8-post-tile wp8-post-button" data-title="Welcome to Jekyll!" data-content="You‚Äôll find this post in your _posts directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run jekyll serve, which launches a web server and auto-regenerates your site when a file is updated.
To add new posts, simply add a file in the _posts directory that follows the convention YYYY-MM-DD-name-of-post.ext and includes the necessary front matter. Take a look at the source for this post to get an idea about how it works.
Jekyll also offers powerful support for code snippets:
{% highlight ruby %}
def print_hi(name)
  puts &quot;Hi, #{name}&quot;
end
print_hi(&#39;Tom&#39;)
#=&gt; prints &#39;Hi, Tom&#39; to STDOUT.
{% endhighlight %}
Check out the Jekyll docs for more info on how to get the most out of Jekyll. File all bugs/feature requests at Jekyll‚Äôs GitHub repo. If you have questions, you can ask them on Jekyll Talk.
">
              <div class="wp8-post-date">Nov 4</div>
              <div class="wp8-tile-content">
                <h3 class="wp8-tile-title">Welcome to Jekyll!</h3>
                <p class="wp8-tile-subtitle">You‚Äôll find this post in your _posts directory. Go...</p>
              </div>
            </button>
          </div>
        </div>
      </div>

      <!-- WP8 Post Modal -->
      <div id="wp8-modal" class="wp8-modal">
        <div class="wp8-modal-header">
          <h2 id="wp8-modal-title" class="wp8-modal-title"></h2>
          <button class="wp8-modal-close" onclick="closeWP8Post()">‚úï</button>
        </div>
        <div id="wp8-modal-content" class="wp8-modal-content"></div>
      </div>

      <script>
        function makeDraggable(element) {
          let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
          const titleBar = element.querySelector('.title-bar');
          if (titleBar) {
            titleBar.onmousedown = dragMouseDown;
          }

          function dragMouseDown(e) {
            e = e || window.event;
            e.preventDefault();
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;
          }

          function elementDrag(e) {
            e = e || window.event;
            e.preventDefault();
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            
            // Calculate new position
            let newTop = element.offsetTop - pos2;
            let newLeft = element.offsetLeft - pos1;
            
            // Constrain to viewport bounds and avoid taskbar
            const taskbarHeight = 32; // Taskbar height + small margin
            const maxTop = window.innerHeight - element.offsetHeight - taskbarHeight;
            const maxLeft = window.innerWidth - element.offsetWidth;
            
            newTop = Math.max(0, Math.min(newTop, maxTop));
            newLeft = Math.max(0, Math.min(newLeft, maxLeft));
            
            element.style.top = newTop + "px";
            element.style.left = newLeft + "px";
          }

          function closeDragElement() {
            document.onmouseup = null;
            document.onmousemove = null;
          }
        }

        let postWindowCounter = 0;
        
        function createPostWindow(title, content) {
          postWindowCounter++;
          const windowId = 'post-window-' + postWindowCounter;
          
          // Create the new window element
          const postWindow = document.createElement('div');
          postWindow.id = windowId;
          postWindow.className = 'window main-window';
          postWindow.style.top = (10 + (postWindowCounter * 30)) + 'px';
          postWindow.style.left = (426 + (postWindowCounter * 30)) + 'px';
          postWindow.style.width = '800px';
          postWindow.style.height = '600px';
          
          postWindow.innerHTML = 
            '<div class="title-bar">' +
              '<div class="title-bar-text"><img src="notepad-0.png" height="12px"/> <span>' + title + '</span></div>' +
              '<div class="title-bar-controls">' +
                '<button aria-label="Minimize"></button>' +
                '<button aria-label="Maximize"></button>' +
                '<button aria-label="Close"></button>' +
              '</div>' +
            '</div>' +
            '<div class="window-body">' +
              content +
            '</div>';
          
          // Add to body
          document.body.appendChild(postWindow);
          
          // Make draggable
          makeDraggable(postWindow);
          
          // Add event listeners for controls
          const minimizeBtn = postWindow.querySelector('button[aria-label="Minimize"]');
          const maximizeBtn = postWindow.querySelector('button[aria-label="Maximize"]');
          const closeBtn = postWindow.querySelector('button[aria-label="Close"]');
          
          minimizeBtn.addEventListener('click', () => minimizeWindow(postWindow));
          
          maximizeBtn.addEventListener('click', (e) => {
            postWindow.classList.toggle('maximized');
            if (postWindow.classList.contains('maximized')) {
              e.target.setAttribute('aria-label', 'Restore');
            } else {
              e.target.setAttribute('aria-label', 'Maximize');
            }
          });
          
          closeBtn.addEventListener('click', () => {
            postWindow.remove();
          });
          
          return postWindow;
        }

        function minimizeWindow(windowElement) {
          // Hide the window
          windowElement.style.display = 'none';
          
          // Get window info
          const titleElement = windowElement.querySelector('.title-bar-text');
          const windowTitle = titleElement ? titleElement.textContent.trim() : 'Window';
          const windowId = windowElement.id;
          
          // Get the icon from the title bar
          const iconElement = titleElement ? titleElement.querySelector('img') : null;
          const iconSrc = iconElement ? iconElement.src : null;
          
          // Create taskbar button
          const taskbarButtons = document.getElementById('taskbar-buttons');
          const taskbarButton = document.createElement('button');
          taskbarButton.className = 'taskbar-button';
          
          // Add icon if available
          if (iconSrc) {
            const iconImg = document.createElement('img');
            iconImg.src = iconSrc;
            iconImg.height = 12;
            iconImg.style.marginRight = '4px';
            taskbarButton.appendChild(iconImg);
          }
          
          // Add text content
          const textSpan = document.createElement('span');
          textSpan.textContent = windowTitle;
          taskbarButton.appendChild(textSpan);
          
          taskbarButton.setAttribute('data-window-id', windowId);
          taskbarButton.onclick = () => restoreWindow(windowId);
          
          taskbarButtons.appendChild(taskbarButton);
        }

        function restoreWindow(windowId) {
          // Show the window
          const windowElement = document.getElementById(windowId);
          if (windowElement) {
            windowElement.style.display = 'block';
          }
          
          // Remove taskbar button
          const taskbarButton = document.querySelector('[data-window-id="' + windowId + '"]');
          if (taskbarButton) {
            taskbarButton.remove();
          }
        }

        function updateClock() {
          const now = new Date();
          const timeString = now.toLocaleTimeString('en-US', { 
            hour12: true, 
            hour: 'numeric', 
            minute: '2-digit'
          });
          document.getElementById('clock').textContent = timeString;
        }

        document.addEventListener('DOMContentLoaded', () => {
          makeDraggable(document.getElementById('info'));
          makeDraggable(document.getElementById('posts'));
          makeDraggable(document.getElementById('post-content'));

          // Update clock immediately and then every minute
          updateClock();
          setInterval(updateClock, 60000);

          // Start menu functionality
          const startButton = document.getElementById('start-button');
          const startMenu = document.getElementById('start-menu');
          
          startButton.addEventListener('click', (e) => {
            e.stopPropagation();
            const isVisible = startMenu.style.display !== 'none';
            startMenu.style.display = isVisible ? 'none' : 'block';
          });

          // Close start menu when clicking elsewhere
          document.addEventListener('click', (e) => {
            if (!startMenu.contains(e.target) && e.target !== startButton) {
              startMenu.style.display = 'none';
            }
          });

          document.querySelectorAll('.post-link').forEach(link => {
            link.addEventListener('click', (e) => {
              e.preventDefault();
              const content = decodeURIComponent(e.target.getAttribute('data-content'));
              const title = e.target.getAttribute('data-title');
              createPostWindow(title, content);
            });
          });

          document.querySelectorAll('.title-bar-controls button[aria-label="Minimize"]').forEach(button => {
            button.addEventListener('click', (e) => {
              const windowElement = e.target.closest('.window');
              if (windowElement) {
                minimizeWindow(windowElement);
              }
            });
          });

          document.querySelectorAll('.title-bar-controls button[aria-label="Maximize"]').forEach(button => {
            button.addEventListener('click', (e) => {
              const windowElement = e.target.closest('.window');
              windowElement.classList.toggle('maximized');
              if (windowElement.classList.contains('maximized')) {
                e.target.setAttribute('aria-label', 'Restore');
              } else {
                e.target.setAttribute('aria-label', 'Maximize');
              }
            });
          });

          // Initialize theme
          initializeTheme();

          // Add event listeners for WP8 post buttons
          document.querySelectorAll('.wp8-post-button').forEach(button => {
            button.addEventListener('click', (e) => {
              const title = e.currentTarget.getAttribute('data-title');
              const content = e.currentTarget.getAttribute('data-content');
              openWP8Post(title, content);
            });
          });

        });

        // Application functions
        let appWindowCounter = 0;

        function createAppWindow(title, content, width = '400px', height = '300px', icon = 'üìÑ') {
          appWindowCounter++;
          const windowId = 'app-window-' + appWindowCounter;
          
          const appWindow = document.createElement('div');
          appWindow.id = windowId;
          appWindow.className = 'window main-window';
          appWindow.style.top = (50 + (appWindowCounter * 30)) + 'px';
          appWindow.style.left = (50 + (appWindowCounter * 30)) + 'px';
          appWindow.style.width = width;
          appWindow.style.height = height;
          appWindow.style.zIndex = 500 + appWindowCounter;
          
          appWindow.innerHTML = 
            '<div class="title-bar">' +
              '<div class="title-bar-text"><span style="font-size: 12px;">' + icon + '</span> ' + title + '</div>' +
              '<div class="title-bar-controls">' +
                '<button aria-label="Minimize"></button>' +
                '<button aria-label="Maximize"></button>' +
                '<button aria-label="Close"></button>' +
              '</div>' +
            '</div>' +
            '<div class="window-body">' +
              content +
            '</div>';
          
          document.body.appendChild(appWindow);
          makeDraggable(appWindow);
          
          const minimizeBtn = appWindow.querySelector('button[aria-label="Minimize"]');
          const maximizeBtn = appWindow.querySelector('button[aria-label="Maximize"]');
          const closeBtn = appWindow.querySelector('button[aria-label="Close"]');
          
          minimizeBtn.addEventListener('click', () => minimizeWindow(appWindow));
          maximizeBtn.addEventListener('click', (e) => {
            appWindow.classList.toggle('maximized');
            e.target.setAttribute('aria-label', 
              appWindow.classList.contains('maximized') ? 'Restore' : 'Maximize'
            );
          });
          closeBtn.addEventListener('click', () => appWindow.remove());
          
          return appWindow;
        }

        function openCalculator() {
          const calculatorHTML = 
            '<div style="text-align: center; padding: 10px;">' +
              '<div id="calc-display" style="background: black; color: lime; font-family: monospace; font-size: 18px; padding: 8px; margin-bottom: 10px; text-align: right; border: 2px inset #c0c0c0;">0</div>' +
              '<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 2px;">' +
                '<button onclick="clearCalc()" style="grid-column: span 2;">Clear</button>' +
                '<button onclick="calcOperation(&quot;/&quot;)">/</button>' +
                '<button onclick="calcOperation(&quot;*&quot;)">*</button>' +
                '<button onclick="calcNumber(&quot;7&quot;)">7</button>' +
                '<button onclick="calcNumber(&quot;8&quot;)">8</button>' +
                '<button onclick="calcNumber(&quot;9&quot;)">9</button>' +
                '<button onclick="calcOperation(&quot;-&quot;)">-</button>' +
                '<button onclick="calcNumber(&quot;4&quot;)">4</button>' +
                '<button onclick="calcNumber(&quot;5&quot;)">5</button>' +
                '<button onclick="calcNumber(&quot;6&quot;)">6</button>' +
                '<button onclick="calcOperation(&quot;+&quot;)">+</button>' +
                '<button onclick="calcNumber(&quot;1&quot;)">1</button>' +
                '<button onclick="calcNumber(&quot;2&quot;)">2</button>' +
                '<button onclick="calcNumber(&quot;3&quot;)">3</button>' +
                '<button onclick="calcEquals()" style="grid-row: span 2; writing-mode: vertical-lr;">=</button>' +
                '<button onclick="calcNumber(&quot;0&quot;)" style="grid-column: span 2;">0</button>' +
                '<button onclick="calcNumber(&quot;.&quot;)">.</button>' +
              '</div>' +
            '</div>';
          
          createAppWindow('Calculator', calculatorHTML, '350px', '220px', 'üßÆ');
          document.getElementById('start-menu').style.display = 'none';
        }

        let calcValue = '0';
        let calcOperator = null;
        let calcPrevious = null;
        let calcWaitingForOperand = false;

        function updateCalcDisplay() {
          const display = document.getElementById('calc-display');
          if (display) display.textContent = calcValue;
        }

        function calcNumber(num) {
          if (calcWaitingForOperand) {
            calcValue = num;
            calcWaitingForOperand = false;
          } else {
            calcValue = calcValue === '0' ? num : calcValue + num;
          }
          updateCalcDisplay();
        }

        function calcOperation(op) {
          if (calcPrevious === null) {
            calcPrevious = calcValue;
          } else if (calcOperator) {
            const result = calculate();
            calcValue = String(result);
            calcPrevious = calcValue;
            updateCalcDisplay();
          }
          calcWaitingForOperand = true;
          calcOperator = op;
        }

        function calcEquals() {
          if (calcPrevious !== null && calcOperator) {
            calcValue = String(calculate());
            calcPrevious = null;
            calcOperator = null;
            calcWaitingForOperand = true;
            updateCalcDisplay();
          }
        }

        function clearCalc() {
          calcValue = '0';
          calcOperator = null;
          calcPrevious = null;
          calcWaitingForOperand = false;
          updateCalcDisplay();
        }

        function calculate() {
          const prev = parseFloat(calcPrevious);
          const current = parseFloat(calcValue);
          
          switch (calcOperator) {
            case '+': return prev + current;
            case '-': return prev - current;
            case '*': return prev * current;
            case '/': return current !== 0 ? prev / current : 0;
            default: return current;
          }
        }

        function openNotepad() {
          // Create a custom window structure for Notepad with menu bar outside window-body
          appWindowCounter++;
          const windowId = 'app-window-' + appWindowCounter;
          
          const notepadWindow = document.createElement('div');
          notepadWindow.id = windowId;
          notepadWindow.className = 'window main-window';
          notepadWindow.style.top = (50 + (appWindowCounter * 30)) + 'px';
          notepadWindow.style.left = (50 + (appWindowCounter * 30)) + 'px';
          notepadWindow.style.width = '500px';
          notepadWindow.style.height = '500px';
          notepadWindow.style.zIndex = 500 + appWindowCounter;
          
          notepadWindow.innerHTML = 
            '<div class="title-bar">' +
              '<div class="title-bar-text"><span style="font-size: 12px;">üìù</span> Notepad</div>' +
              '<div class="title-bar-controls">' +
                '<button aria-label="Minimize"></button>' +
                '<button aria-label="Maximize"></button>' +
                '<button aria-label="Close"></button>' +
              '</div>' +
            '</div>' +
            '<div class="notepad-menubar" style="background: #c0c0c0; border-bottom: 1px solid #808080; padding: 2px 4px; font-size: 11px; position: relative; height: 18px; margin-top: 18px;">' +
              '<span class="notepad-menu" onmouseenter="showNotepadMenu(this, &quot;file&quot;)" onmouseleave="hideNotepadMenu()">File</span>' +
              '<span class="notepad-menu" onmouseenter="showNotepadMenu(this, &quot;edit&quot;)" onmouseleave="hideNotepadMenu()">Edit</span>' +
              '<div id="notepad-file-menu" class="notepad-dropdown" style="display: none; position: absolute; top: 100%; left: 4px; background: #c0c0c0; border: 1px outset #c0c0c0; min-width: 80px; z-index: 1000;">' +
                '<div class="notepad-menu-item" onclick="saveNote(); hideNotepadMenu();">Save</div>' +
              '</div>' +
              '<div id="notepad-edit-menu" class="notepad-dropdown" style="display: none; position: absolute; top: 100%; left: 36px; background: #c0c0c0; border: 1px outset #c0c0c0; min-width: 80px; z-index: 1000;">' +
                '<div class="notepad-menu-item" onclick="clearNote(); hideNotepadMenu();">Clear</div>' +
              '</div>' +
            '</div>' +
            '<div class="window-body" style="height: calc(100% - 48px); padding: 4px;">' +
              '<textarea id="notepad-text" style="width: 100%; height: 100%; border: 1px inset #c0c0c0; font-family: monospace; padding: 5px; resize: none; box-sizing: border-box;" placeholder="Start typing..."></textarea>' +
            '</div>' +
            '<style>' +
              '.notepad-menu { padding: 2px 8px; cursor: pointer; border: 1px solid transparent; margin-right: 2px; }' +
              '.notepad-menu:hover { background: #316ac5; color: white; border: 1px solid #316ac5; }' +
              '.notepad-menu-item { padding: 2px 16px; cursor: pointer; }' +
              '.notepad-menu-item:hover { background: #316ac5; color: white; }' +
            '</style>';
          
          document.body.appendChild(notepadWindow);
          makeDraggable(notepadWindow);
          
          const minimizeBtn = notepadWindow.querySelector('button[aria-label="Minimize"]');
          const maximizeBtn = notepadWindow.querySelector('button[aria-label="Maximize"]');
          const closeBtn = notepadWindow.querySelector('button[aria-label="Close"]');
          
          minimizeBtn.addEventListener('click', () => minimizeWindow(notepadWindow));
          maximizeBtn.addEventListener('click', (e) => {
            notepadWindow.classList.toggle('maximized');
            e.target.setAttribute('aria-label', 
              notepadWindow.classList.contains('maximized') ? 'Restore' : 'Maximize'
            );
          });
          closeBtn.addEventListener('click', () => notepadWindow.remove());
          
          document.getElementById('start-menu').style.display = 'none';
        }

        function saveNote() {
          const text = document.getElementById('notepad-text').value;
          if (text.trim()) {
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'note.txt';
            a.click();
            URL.revokeObjectURL(url);
          }
        }

        function clearNote() {
          const notepad = document.getElementById('notepad-text');
          if (notepad) notepad.value = '';
        }

        function showNotepadMenu(menuElement, menuType) {
          // Hide all menus first
          hideNotepadMenu();
          
          // Show the specific menu
          const menuId = 'notepad-' + menuType + '-menu';
          const menu = document.getElementById(menuId);
          if (menu) {
            menu.style.display = 'block';
          }
        }

        function hideNotepadMenu() {
          const fileMenu = document.getElementById('notepad-file-menu');
          const editMenu = document.getElementById('notepad-edit-menu');
          if (fileMenu) fileMenu.style.display = 'none';
          if (editMenu) editMenu.style.display = 'none';
        }

        // Windows Phone 8 Functions
        function toggleTheme() {
          const body = document.body;
          const isWP8Mode = body.classList.contains('wp8-mode');
          
          if (isWP8Mode) {
            // Switch back to Windows 98 mode
            body.classList.remove('wp8-mode');
            localStorage.setItem('theme', 'windows98');
          } else {
            // Switch to Windows Phone 8 mode
            body.classList.add('wp8-mode');
            localStorage.setItem('theme', 'wp8');
          }
          
          // Close start menu if open
          const startMenu = document.getElementById('start-menu');
          if (startMenu) {
            startMenu.style.display = 'none';
          }
          
          // Update WP8 clock
          updateWP8Clock();
        }

        function openWP8Post(title, content) {
          const modal = document.getElementById('wp8-modal');
          const modalTitle = document.getElementById('wp8-modal-title');
          const modalContent = document.getElementById('wp8-modal-content');
          
          modalTitle.textContent = title;
          modalContent.innerHTML = '<p>' + content.replace(/\n\n/g, '</p><p>').replace(/\n/g, '<br>') + '</p>';
          modal.style.display = 'block';
        }

        function closeWP8Post() {
          const modal = document.getElementById('wp8-modal');
          modal.style.display = 'none';
        }

        function updateWP8Clock() {
          const wp8Clock = document.getElementById('wp8-clock');
          if (wp8Clock) {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
              hour12: true, 
              hour: 'numeric', 
              minute: '2-digit'
            });
            wp8Clock.textContent = timeString;
          }
        }

        // Check for saved theme preference and auto-detect mobile
        function initializeTheme() {
          const savedTheme = localStorage.getItem('theme');
          const isMobile = window.innerWidth <= 768 || /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
          
          // Auto-switch to WP8 on mobile, unless user has explicitly chosen Windows 98
          if ((isMobile && savedTheme !== 'windows98') || savedTheme === 'wp8') {
            document.body.classList.add('wp8-mode');
          }
          
          // Update WP8 clock
          updateWP8Clock();
          // Update WP8 clock every minute
          setInterval(updateWP8Clock, 60000);
        }

      </script>
    </body>

    </html>
  